(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{2524:function(e,t,n){"use strict";var a=n(6),r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(33)),i=r(n(35)),u=r(n(28)),l=r(n(18)),d=a(n(1)),c=r(n(2)),f=n(27),s=n(9),p=n(8),m=n(49),g=n(15),v=r(n(112)),y=r(n(805)),b=r(n(2663)),E=r(n(2672)),h=r(n(2673)),x=r(n(2570)),I=r(n(2571)),w=r(n(2674)),_=n(2597),R=r(n(2577)),D=r(n(806)),C=r(n(2676)),S=a(n(2677)),O=function(e){var t=e.currentEnvironment,n=e.deleteLayout,a=e.deleteLayouts,r=e.componentsAndModelsMainPossibleMainFields,c=e.history.push,O=e.plugins,T=e.slug,M=(0,f.useParams)(),k=M.componentSlug,P=M.type,L=(0,p.useGlobalContext)().emitEvent,F=(0,d.useReducer)(S.default,S.initialState),j=(0,l.default)(F,2),N=j[0],z=j[1],A=(0,d.useState)(!1),U=(0,l.default)(A,2),q=U[0],W=U[1],B=(0,d.useState)(!1),H=(0,l.default)(B,2),J=H[0],V=H[1],Z="content-types"===P?"col-8":"col-12",G=new AbortController,K=G.signal,Q=N.toJS(),X=Q.componentLayouts,Y=Q.isLoading,$=Q.initialData,ee=Q.metaToEdit,te=Q.modifiedData,ne=Q.metaForm,ae=(0,d.useMemo)((function(){return(0,s.get)(te,["schema","attributes"],{})}),[te]),re=(0,d.useMemo)((function(){return(0,s.get)(te,["schema","info","name"],"")}),[te]),oe=(0,d.useCallback)((function(){return(0,s.get)(te,["layouts","edit"],[])}),[te]),ie=(0,d.useCallback)((function(){return(0,s.get)(te,["layouts","editRelations"],[])}),[te]),ue=(0,d.useCallback)((function(e){if("relation"!==e&&"component"!==e)return[];var t="component"===e?"component":"targetModel",n=(0,s.get)(te,["schema","attributes",ee,t],"");return(0,s.get)(r,[n],[])}),[ee,r,te]);(0,d.useEffect)((function(){return function(){var e=(0,i.default)(o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.request)((0,y.default)("".concat(P,"/").concat(T||k)),{method:"GET",signal:K});case 3:t=e.sent,n=t.data,z({type:"GET_DATA_SUCCEEDED",data:n.contentType||n.component,componentLayouts:n.components}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),20!==e.t0.code&&strapi.notification.error("notification.error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()(),function(){G.abort()}}),[T,P,k]);var le=function(e){var t=e.target,n=t.name,a=t.value;z({type:"ON_CHANGE_META",keys:n.split("."),value:a})},de=function(){var e=(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(0,s.cloneDeep)(te),(0,s.set)(t,"layouts.edit",(0,_.unformatLayout)(t.layouts.edit)),delete t.schema,delete t.uid,delete t.isComponent,delete t.category,delete t.apiID,e.next=10,(0,p.request)((0,y.default)("".concat(P,"/").concat(T||k)),{method:"PUT",body:t,signal:K});case 10:z({type:"SUBMIT_SUCCEEDED"}),T&&n(T),k&&a(),L("didEditEditSettings"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),strapi.notification.error("notification.error");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){W((function(e){return!e}))};return d.default.createElement(D.default,{attributes:ae,buttonData:function(){var e=ae,t=(0,s.get)(te,["metadatas"],{}),n=oe().reduce((function(e,t){return[].concat((0,u.default)(e),(0,u.default)(t.rowContent))}),[]);return Object.keys(e).filter((function(t){return"relation"!==(0,s.get)(e,[t,"type"],"")})).filter((function(e){return!0===(0,s.get)(t,[e,"edit","visible"],!1)})).filter((function(e){return-1===n.findIndex((function(t){return t.name===e}))}))}(),componentLayouts:X,goTo:c,isDraggingSibling:J,layout:oe(),metadatas:(0,s.get)(te,["metadatas"],{}),moveItem:function(e,t,n,a){z(n===a?{type:"REORDER_ROW",dragRowIndex:n,dragIndex:e,hoverIndex:t}:{type:"REORDER_DIFF_ROW",dragIndex:e,hoverIndex:t,dragRowIndex:n,hoverRowIndex:a})},moveRow:function(e,t){z({type:"MOVE_ROW",dragRowIndex:e,hoverRowIndex:t})},onAddData:function(e){z({type:"ON_ADD_DATA",name:e})},relationsLayout:ie(),removeField:function(e,t){z({type:"REMOVE_FIELD",rowIndex:e,fieldIndex:t})},setEditFieldToSelect:function(e){z({type:"SET_FIELD_TO_EDIT",name:e}),ce()},setIsDraggingSibling:V,selectedItemName:ee},d.default.createElement(I.default,{inputs:[{label:{id:"".concat(v.default,".containers.SettingPage.editSettings.entry.title")},description:{id:"".concat(v.default,".containers.SettingPage.editSettings.entry.title.description")},type:"select",name:"settings.mainField",customBootstrapClass:"col-md-4",selectOptions:["id"],didCheckErrors:!1,validations:{}}],initialData:$,isLoading:Y,modifiedData:te,name:re,onChange:function(e){var t=e.target,n=t.name,a=t.value;z({type:"ON_CHANGE",keys:n.split("."),value:a})},onConfirmReset:function(){z({type:"ON_RESET"})},onConfirmSubmit:de,slug:T||k,isEditSettings:!0},d.default.createElement("div",{className:"row"},d.default.createElement(h.default,{className:Z},d.default.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},d.default.createElement("div",null,d.default.createElement(E.default,{title:"".concat(v.default,".global.displayedFields"),description:"".concat(v.default,".containers.SettingPage.editSettings.description")})),d.default.createElement("div",{style:{marginTop:-6}},(0,R.default)("editSettingsView","left.links",O,t,T,c,{componentSlug:k,type:P,modifiedData:te})))),"components"!==P&&d.default.createElement(h.default,{className:"col-4"},d.default.createElement(E.default,{title:"".concat(v.default,".containers.SettingPage.relations"),description:"".concat(v.default,".containers.SettingPage.editSettings.description")})),d.default.createElement(b.default,{className:Z}),"components"!==P&&d.default.createElement(w.default,{addItem:function(e){z({type:"ADD_RELATION",name:e})},buttonData:function(){var e=ae,t=ie();return Object.keys(e).filter((function(t){return"relation"===(0,s.get)(e,[t,"type"],"")})).filter((function(e){return-1===t.indexOf(e)}))}(),moveItem:function(e,t){z({type:"MOVE_RELATION",dragIndex:e,hoverIndex:t})},removeItem:function(e){z({type:"REMOVE_RELATION",index:e})}}))),d.default.createElement(x.default,{headerId:"".concat(v.default,".containers.EditSettingsView.modal-form.edit-field"),isOpen:q,onClosed:function(){z({type:"UNSET_FIELD_TO_EDIT"})},onSubmit:function(e){e.preventDefault(),z({type:"SUBMIT_META_FORM"}),ce()},onToggle:ce,renderForm:function(){return Object.keys((0,s.get)(te,["metadatas",ee,"edit"],{})).filter((function(e){return"visible"!==e})).map((function(e,t){var n=(0,s.get)(ae,[ee,"type"]);return("dynamiczone"!==n||["label","description"].includes(e))&&("component"!==n&&"media"!==n||"label"===e)&&("json"!==n&&"boolean"!==n||"placeholder"!==e)?"richtext"===n&&"editable"===e?null:d.default.createElement("div",{className:"col-6",key:e},d.default.createElement(g.FormattedMessage,{id:"".concat(v.default,".containers.SettingPage.editSettings.entry.title.description")},(function(a){return d.default.createElement(g.FormattedMessage,{id:(0,s.get)((0,C.default)(e),"label.id","app.utils.defaultMessage")},(function(r){return d.default.createElement(m.Inputs,{autoFocus:0===t,description:"mainField"===e?a:"",label:r,name:e,type:(0,C.default)(e).type,onBlur:function(){},value:(0,s.get)(ne,e,""),onChange:le,options:ue(n)})}))}))):null}))},subHeaderContent:ee,type:(0,s.get)(ae,[ee,"type"],"")}))};O.defaultProps={slug:null},O.propTypes={currentEnvironment:c.default.string.isRequired,deleteLayout:c.default.func.isRequired,deleteLayouts:c.default.func.isRequired,componentsAndModelsMainPossibleMainFields:c.default.object.isRequired,history:c.default.shape({push:c.default.func}).isRequired,location:c.default.shape({search:c.default.string.isRequired}).isRequired,plugins:c.default.object.isRequired,slug:c.default.string};var T=O;t.default=T},2538:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(112)),o=function(e){return"".concat(r.default,".").concat(e)};t.default=o},2539:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(4));function o(){var e=(0,r.default)(["\n  padding: 18px 30px 18px 30px;\n"]);return o=function(){return e},e}var i=a(n(3)).default.div(o());t.default=i},2554:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(4));function o(){var e=(0,r.default)(["\n  .btn-group button {\n    line-height: 28px;\n  }\n"]);return o=function(){return e},e}var i=a(n(3)).default.div(o());t.default=i},2568:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(1)),o=a(n(2)),i=n(31),u=a(n(2569)),l=function(e){var t=e.children,n=e.componentUid,a=e.friendlyName,o=e.icon,l=e.onClick;return r.default.createElement(u.default,{onClick:function(e){e.preventDefault(),e.stopPropagation(),l(n)}},r.default.createElement("button",{className:"component-icon",type:"button"},r.default.createElement(i.FontAwesomeIcon,{icon:o})),r.default.createElement("div",{className:"component-uid"},r.default.createElement("span",null,a)),t)};l.defaultProps={children:null,friendlyName:"",onClick:function(){},icon:"smile"},l.propTypes={children:o.default.node,componentUid:o.default.string.isRequired,friendlyName:o.default.string,icon:o.default.string,onClick:o.default.func};var d=l;t.default=d},2569:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(4));function o(){var e=(0,r.default)(["\n  position: relative;\n  height: 90px;\n  width: 139px !important;\n  margin-right: 10px;\n  padding: 18px 10px;\n  background-color: #ffffff;\n  color: #919bae;\n  text-align: center;\n  border-radius: 2px;\n  cursor: pointer;\n  border: 1px solid #ffffff;\n\n  button {\n    outline: 0;\n  }\n\n  .component-uid {\n    width: 119px;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n    color: #919bae;\n    font-weight: 500;\n    font-size: 13px;\n    line-height: normal;\n  }\n\n  .component-icon {\n    width: 35px;\n    height: 35px;\n    margin-bottom: 5px;\n    line-height: 35px;\n    align-self: center;\n    border-radius: 50%;\n    background-color: #e9eaeb;\n    color: #b4b6ba;\n    padding: 0;\n    i,\n    svg {\n      margin: auto;\n      display: block;\n    }\n  }\n\n  &:hover {\n    background-color: #e6f0fb;\n    color: #007eff;\n    border: 1px solid #aed4fb;\n\n    .component-icon {\n      background-color: #aed4fb;\n      color: #007eff;\n    }\n    .component-uid {\n      color: #007eff;\n    }\n  }\n"]);return o=function(){return e},e}var i=a(n(3)).default.div(o());t.default=i},2570:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(1)),o=a(n(2)),i=n(8),u=n(15),l=n(9),d=n(13),c=function(e){var t=e.headerId,n=e.isOpen,a=e.onClosed,o=e.onSubmit,c=e.onToggle,f=e.renderForm,s=e.subHeaderContent,p=e.type;return r.default.createElement(i.Modal,{isOpen:n,onClosed:a,onToggle:c},r.default.createElement(i.HeaderModal,null,r.default.createElement("section",null,r.default.createElement(i.HeaderModalTitle,{style:{textTransform:"none"}},r.default.createElement(d.AttributeIcon,{type:"timestamp"===p?"date":["decimal","float","integer","biginter"].includes(p)?"number":p,style:{margin:"auto 20px auto 0"}}),r.default.createElement(u.FormattedMessage,{id:t}))),r.default.createElement("section",null,r.default.createElement(i.HeaderModalTitle,null,r.default.createElement("span",null,(0,l.upperFirst)(s)),r.default.createElement("hr",null)))),r.default.createElement("form",{onSubmit:o},r.default.createElement(i.ModalForm,null,r.default.createElement(i.ModalBody,null,f())),r.default.createElement(i.ModalFooter,null,r.default.createElement("section",null,r.default.createElement(d.Button,{onClick:c,color:"cancel"},r.default.createElement(u.FormattedMessage,{id:"components.popUpWarning.button.cancel"})),r.default.createElement(d.Button,{type:"submit",color:"success"},r.default.createElement(u.FormattedMessage,{id:"form.button.done"}))))))};c.defaultProps={isOpen:!1,onClosed:function(){},onSubmit:function(){},onToggle:function(){},renderForm:function(){},subHeaderContent:"",type:""},c.propTypes={headerId:o.default.string.isRequired,isOpen:o.default.bool,onClosed:o.default.func,onSubmit:o.default.func,onToggle:o.default.func,renderForm:o.default.func,subHeaderContent:o.default.string,type:o.default.string};var f=c;t.default=f},2571:function(e,t,n){"use strict";var a=n(6),r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(33)),i=r(n(35)),u=r(n(5)),l=r(n(28)),d=r(n(18)),c=a(n(1)),f=r(n(2)),s=n(9),p=n(27),m=n(15),g=n(49),v=n(8),y=r(n(112)),b=r(n(2572)),E=r(n(2539)),h=r(n(2574)),x=r(n(2576)),I=function(e){var t=e.children,n=e.history.goBack,a=e.getListDisplayedFields,r=e.inputs,f=e.initialData,p=e.isEditSettings,I=e.isLoading,w=e.modifiedData,_=e.onChange,R=e.onConfirmReset,D=e.onConfirmSubmit,C=e.name,S=(0,v.useGlobalContext)(),O=S.emitEvent,T=S.formatMessage,M=(0,c.useState)(!1),k=(0,d.default)(M,2),P=k[0],L=k[1],F=(0,c.useState)(!1),j=(0,d.default)(F,2),N=j[0],z=j[1],A=(0,c.useMemo)((function(){return(0,s.get)(w,["schema","attributes"],{})}),[w]),U=function(){return L((function(e){return!e}))},q=function(){return z((function(e){return!e}))},W={actions:[{color:"cancel",onClick:U,label:T({id:"".concat(y.default,".popUpWarning.button.cancel")}),type:"button",disabled:(0,s.isEqual)(w,f),style:{fontWeight:600,paddingLeft:15,paddingRight:15}},{color:"success",label:T({id:"".concat(y.default,".containers.Edit.submit")}),type:"submit",disabled:(0,s.isEqual)(w,f),style:{minWidth:150,fontWeight:600}}],title:{label:T({id:"".concat(y.default,".components.SettingsViewWrapper.pluginHeader.title")},{name:(0,s.upperFirst)(C)})},content:T({id:"".concat(y.default,".components.SettingsViewWrapper.pluginHeader.description.").concat(p?"edit":"list","-settings")})},B=function(e){if("settings.defaultSortBy"===e.name)return["id"].concat((0,l.default)(a().filter((function(e){return"media"!==(0,s.get)(A,[e,"type"],"")&&"id"!==e&&"richtext"!==(0,s.get)(A,[e,"type"],"")}))));if("settings.mainField"===e.name){var t=A;return Object.keys(t).filter((function(e){var n=(0,s.get)(t,[e,"type"],"");return!["json","text","relation","component","boolean","date","media","richtext"].includes(n)&&!!n}))}return e.options};return I?c.default.createElement(v.LoadingIndicatorPage,null):c.default.createElement(c.default.Fragment,null,c.default.createElement(v.BackHeader,{onClick:n}),c.default.createElement(E.default,{className:"container-fluid"},c.default.createElement("form",{onSubmit:function(e){e.preventDefault(),q(),O("willSaveContentTypeLayout")}},c.default.createElement(g.Header,W),c.default.createElement("div",{className:"row",style:{paddingTop:"3px"}},c.default.createElement(b.default,{style:{marginBottom:"13px",paddingBottom:"30px",paddingTop:"24px"}},c.default.createElement(h.default,{isSettings:!0}),c.default.createElement("div",{className:"row"},r.map((function(e){return c.default.createElement(m.FormattedMessage,{key:e.name,id:e.label.id},(function(t){return c.default.createElement("div",{className:e.customBootstrapClass},c.default.createElement(m.FormattedMessage,{id:(0,s.get)(e,"description.id","app.utils.defaultMessage")},(function(n){return c.default.createElement(g.Inputs,(0,u.default)({},e,{description:n,label:" "===t?null:t,onChange:_,options:B(e),value:(0,s.get)(w,e.name,"")}))})))}))})),c.default.createElement("div",{className:"col-12"},c.default.createElement(x.default,{style:{marginBottom:20}}))),c.default.createElement(h.default,null),t)),c.default.createElement(v.PopUpWarning,{isOpen:P,toggleModal:U,content:{title:"".concat(y.default,".popUpWarning.title"),message:"".concat(y.default,".popUpWarning.warning.cancelAllSettings"),cancel:"".concat(y.default,".popUpWarning.button.cancel"),confirm:"".concat(y.default,".popUpWarning.button.confirm")},popUpWarningType:"danger",onConfirm:function(){R(),U()}}),c.default.createElement(v.PopUpWarning,{isOpen:N,toggleModal:q,content:{title:"".concat(y.default,".popUpWarning.title"),message:"".concat(y.default,".popUpWarning.warning.updateAllSettings"),cancel:"".concat(y.default,".popUpWarning.button.cancel"),confirm:"".concat(y.default,".popUpWarning.button.confirm")},popUpWarningType:"danger",onConfirm:(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:q();case 3:case"end":return e.stop()}}),e)})))}))))};I.defaultProps={getListDisplayedFields:function(){return[]},inputs:[],initialData:{},isEditSettings:!1,modifiedData:{},name:"",onConfirmReset:function(){},onConfirmSubmit:function(){var e=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSubmit:function(){},pluginHeaderProps:{actions:[],description:{id:"app.utils.defaultMessage"},title:{id:"app.utils.defaultMessage",values:{}}}},I.propTypes={children:f.default.node.isRequired,getListDisplayedFields:f.default.func,history:f.default.shape({goBack:f.default.func.isRequired}).isRequired,initialData:f.default.object,inputs:f.default.array,isEditSettings:f.default.bool,isLoading:f.default.bool.isRequired,modifiedData:f.default.object,name:f.default.string,onChange:f.default.func.isRequired,onConfirmReset:f.default.func,onConfirmSubmit:f.default.func,onSubmit:f.default.func,pluginHeaderProps:f.default.shape({actions:f.default.array,description:f.default.shape({id:f.default.string}),title:f.default.shape({id:f.default.string,values:f.default.object})})};var w=(0,p.withRouter)(I);t.default=w},2572:function(e,t,n){"use strict";var a=n(0),r=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(1)),i=a(n(2)),u=n(15),l=n(2573),d=function(e){return o.default.createElement("p",null,e)},c=function(e){var t=e.children,n=e.description,a=e.style,r=e.title;return o.default.createElement("div",{className:"col-md-12"},o.default.createElement(l.Wrapper,{style:a},o.default.createElement(l.Sub,null,!!r&&o.default.createElement("p",null,o.default.createElement(u.FormattedMessage,{id:r})),!!n&&o.default.createElement(u.FormattedMessage,{id:n},d)),t))};c.defaultProps={children:null,description:null,style:{},title:null},c.propTypes={children:i.default.any,description:i.default.string,style:i.default.object,title:i.default.string};var f=(0,o.memo)(c);t.default=f},2573:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.Sub=t.Wrapper=void 0;var r=a(n(4)),o=a(n(3));function i(){var e=(0,r.default)(["\n  padding-top: 0px;\n  line-height: 18px;\n  > p:first-child {\n    margin-bottom: 1px;\n    font-weight: 700;\n    color: #333740;\n    font-size: 1.8rem;\n  }\n  > p {\n    color: #787e8f;\n    font-size: 13px;\n  }\n"]);return i=function(){return e},e}function u(){var e=(0,r.default)(["\n  margin-bottom: 35px;\n  background: #ffffff;\n  padding: 22px 28px 18px;\n  padding-bottom: 13px;\n  border-radius: 2px;\n  box-shadow: 0 2px 4px #e3e9f3;\n  -webkit-font-smoothing: antialiased;\n"]);return u=function(){return e},e}var l=o.default.div(u());t.Wrapper=l;var d=o.default.div(i());t.Sub=d},2574:function(e,t,n){"use strict";var a=n(0),r=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(1)),i=a(n(2)),u=n(15),l=a(n(112)),d=a(n(2575)),c=function(e){var t=e.isSettings?"settings":"view",n="".concat(l.default,".containers.SettingPage.").concat(t);return o.default.createElement("div",{style:{marginBottom:"18px"}},o.default.createElement(u.FormattedMessage,{id:n},(function(e){return o.default.createElement(d.default,null,e)})))};c.propTypes={isSettings:i.default.bool},c.defaultProps={isSettings:!1};var f=(0,o.memo)(c);t.default=f},2575:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(4));function o(){var e=(0,r.default)(["\n  color: #787e8f;\n  font-size: 11px;\n  font-weight: 700;\n  letter-spacing: 0.77px;\n  text-transform: uppercase;\n"]);return o=function(){return e},e}var i=a(n(3)).default.div(o());t.default=i},2576:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(4));function o(){var e=(0,r.default)(["\n  margin-top: 17px;\n  margin-bottom: 24px;\n  border-top: 1px solid #f6f6f6;\n"]);return o=function(){return e},e}var i=a(n(3)).default.div(o());t.default=i},2577:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(28)),o=a(n(5)),i=a(n(1)),u=n(9),l=a(n(112)),d=function(e,t,n,a,d,c){for(var f=arguments.length,s=new Array(f>6?f-6:0),p=6;p<f;p++)s[p-6]=arguments[p];var m=Object.keys(n).reduce((function(f,p){var m=n[p],g=(0,u.get)(m,"injectedComponents",[]).filter((function(n){return n.plugin==="".concat(l.default,".").concat(e)&&n.area===t})).map((function(e){var t=e.component;return i.default.createElement(t,(0,o.default)({viewProps:s,currentEnvironment:a,getModelName:function(){return d},push:c},e.props,{key:e.key}))}));return[].concat((0,r.default)(f),(0,r.default)(g))}),[]);return m};t.default=d},2595:function(e,t,n){"use strict";var a=n(6),r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(18)),i=a(n(1)),u=n(15),l=r(n(2)),d=n(54),c=n(48),f=r(n(2538)),s=n(2664);function p(e){var t=e.data,n=e.isRelation,a=e.onClick,r=e.pStyle,l=e.style,p=(0,i.useState)(!1),m=(0,o.default)(p,2),g=m[0],v=m[1];return i.default.createElement(s.Wrapper,{isOpen:g,notAllowed:0===t.length,style:l},i.default.createElement(c.ButtonDropdown,{isOpen:g,toggle:function(){t.length>0&&v((function(e){return!e}))}},i.default.createElement(c.DropdownToggle,null,i.default.createElement(u.FormattedMessage,{id:(0,f.default)("containers.SettingPage.".concat(n?"add.relational-field":"add.field"))},(function(e){return i.default.createElement("p",{style:r},i.default.createElement(d.Plus,{fill:"#007eff",height:"11px",width:"11px"}),e)}))),i.default.createElement(c.DropdownMenu,null,t.map((function(e){return i.default.createElement(c.DropdownItem,{key:e,onClick:function(){a(e)}},e)})))))}p.defaultProps={data:[],isRelation:!1,onClick:function(){},pStyle:{},style:{}},p.propTypes={data:l.default.array,isRelation:l.default.bool,onClick:l.default.func,pStyle:l.default.object,style:l.default.object};var m=(0,i.memo)(p);t.default=m},2596:function(e,t,n){"use strict";var a=n(6),r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(18)),i=a(n(1)),u=n(9),l=r(n(2)),d=r(n(807)),c=r(n(811)),f=r(n(2667)),s=r(n(2668)),p=r(n(2669)),m=r(n(2670)),g=(0,i.forwardRef)((function(e,t){var n=e.goTo,a=e.componentUid,r=e.componentLayouts,l=e.dynamicZoneComponents,g=e.isDragging,v=e.label,y=e.name,b=e.onClickEdit,E=e.onClickRemove,h=e.selectedItem,x=e.showLeftCarret,I=e.showRightCarret,w=e.size,_=e.style,R=e.type,D="_TEMP_"===y,C=(0,i.useState)(!1),S=(0,o.default)(C,2),O=S[0],T=S[1],M=(0,i.useState)(!1),k=(0,o.default)(M,2),P=k[0],L=k[1],F=g?.2:1,j=12===w,N=j&&O?"none":"",z=j&&O?0:"100%",A=["json","text","file","media","component","richtext","dynamiczone"],U=A.includes(R)&&!O,q=(0,u.get)(r,[a],{}),W=(0,u.get)(q,["layouts","edit"],[]),B=function(e){return"".concat(1/12*e*100,"%")};return i.default.createElement("div",{style:{width:B(w)},onDrag:function(){j&&!O&&T(!0)},onDragEnd:function(){j&&T(!1)}},i.default.createElement(p.default,{ref:t.dropRef,withLongerHeight:U,style:_},O&&j&&i.default.createElement(c.default,{style:{marginRight:"-10px"}}),i.default.createElement(i.default.Fragment,null,x&&i.default.createElement(f.default,null),i.default.createElement("div",{className:"sub",style:{width:z,opacity:F}},i.default.createElement(d.default,{goTo:n,componentUid:a,isHidden:D,isOverDynamicZone:P,label:v,name:y,onClick:b,onRemove:E,ref:t.dragRef,selectedItem:h,style:{display:N,marginRight:0,paddingRight:0},type:R,withLongerHeight:U},"component"===R&&W.map((function(e,t){var n=t===W.length-1?"29px":"",a=0===t?"5px":"";return i.default.createElement("div",{style:{display:"flex",marginBottom:n,marginTop:a},key:t},e.map((function(e){var t=(0,u.get)(q,["schema","attributes",e.name,"type"],""),n=(0,u.get)(q,["metadatas",e.name,"edit","label"],"");return i.default.createElement("div",{key:e.name,style:{width:B(e.size),marginBottom:"6px"}},i.default.createElement(d.default,{label:n,name:e.name,isSub:!0,withLongerHeight:A.includes(t)}))})))})),"dynamiczone"===R&&i.default.createElement(s.default,null,l.map((function(e){var t,n=(t=e,(0,u.get)(r,[t,"schema","info"],{name:"",icon:""})),a=n.name,o=n.icon;return i.default.createElement(m.default,{key:e,componentUid:e,friendlyName:a,icon:o,setIsOverDynamicZone:L})}))))),I&&i.default.createElement(f.default,{right:!0}))))}));g.defaultProps={goTo:function(){},componentLayouts:{},componentUid:null,dynamicZoneComponents:[],isDragging:!1,label:"",onClickEdit:function(){},onClickRemove:function(){},selectedItem:"",showLeftCarret:!1,showRightCarret:!1,size:1,style:{},type:"string"},g.propTypes={goTo:l.default.func,componentLayouts:l.default.object,componentUid:l.default.string,dynamicZoneComponents:l.default.array,isDragging:l.default.bool,label:l.default.string,name:l.default.string.isRequired,onClickEdit:l.default.func,onClickRemove:l.default.func,selectedItem:l.default.string,showLeftCarret:l.default.bool,showRightCarret:l.default.bool,size:l.default.number,style:l.default.object,type:l.default.string},g.displayName="DraggedFieldWithPreview";var v=g;t.default=v},2597:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unformatLayout=t.getRowSize=t.getInputSize=t.getFieldType=t.formatLayout=t.createLayout=void 0;var a=function(e){return e.reduce((function(e,t){return e+t.size}),0)};t.getRowSize=a;t.createLayout=function(e){return e.reduce((function(e,t,n){var a={rowId:n,rowContent:t};return e.concat(a)}),[])};t.formatLayout=function(e){return e.reduce((function(e,t){var n=[],r=t.rowContent.reduce((function(e,t){var r=a(e);return"_TEMP_"===t.name||(r+t.size<=12?e.push(t):n.push(t)),e}),[]),o=0===e.length?0:Math.max.apply(Math,e.map((function(e){return e.rowId})))+1,i=a(r);if(i<12&&r.push({name:"_TEMP_",size:12-i}),e.push({rowId:o,rowContent:r}),n.length>0){var u=a(n);u<12&&n.push({name:"_TEMP_",size:12-u}),e.push({rowId:o+1,rowContent:n}),n=[]}return e}),[]).filter((function(e){return e.rowContent.length>0})).filter((function(e){return 1!==e.rowContent.length||"_TEMP_"!==e.rowContent[0].name}))};t.unformatLayout=function(e){return e.reduce((function(e,t){var n=t.rowContent.filter((function(e){return"_TEMP_"!==e.name}));return e.concat([n])}),[])};t.getInputSize=function(e){switch(e){case"boolean":case"date":case"integer":case"float":case"biginteger":case"decimal":case"time":return 4;case"json":case"component":case"richtext":case"dynamiczone":return 12;default:return 6}};t.getFieldType=function(e,t){return e.getIn(["modifiedData","schema","attributes",t,"type"])}},2663:function(e,t,n){"use strict";var a=n(0),r=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(1)),i=a(n(2)),u=n(9),l=a(n(804)),d=a(n(2595)),c=a(n(2554)),f=a(n(2665)),s=a(n(2666)),p=function(e){var t=e.className,n=(0,l.default)(),a=n.attributes,r=n.buttonData,i=n.layout,p=n.moveItem,m=n.moveRow,g=n.onAddData,v=n.removeField,y=(0,o.useCallback)((function(e){return(0,u.get)(a,[e,"component"],"")}),[a]),b=(0,o.useCallback)((function(e){return(0,u.get)(a,[e],{}).type}),[a]),E=(0,o.useCallback)((function(e){return(0,u.get)(a,[e],{}).components||[]}),[a]);return o.default.createElement("div",{className:t},o.default.createElement(c.default,{style:{marginTop:7,paddingTop:11,paddingLeft:5,paddingRight:5,border:"1px dashed #e3e9f3"}},i.map((function(e,t){return o.default.createElement(f.default,{key:e.rowId,style:{}},e.rowContent.map((function(e,n){var a=e.name,r=e.size;return o.default.createElement(s.default,{componentUid:y(a),dynamicZoneComponents:E(a),itemIndex:n,key:a,moveRow:m,moveItem:p,name:a,removeField:v,rowIndex:t,size:r,type:b(a)})})))})),o.default.createElement(f.default,{style:{marginBottom:10}},o.default.createElement(d.default,{data:r,onClick:g,style:{width:"100%",margin:"0 5px"}}))))};p.defaultProps={className:"col-8"},p.propTypes={className:i.default.string};var m=(0,o.memo)(p);t.default=m},2664:function(e,t,n){"use strict";var a=n(6),r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.Wrapper=void 0;var o=r(n(4)),i=a(n(3));function u(){var e=(0,o.default)(["\n        > div {\n          > button {\n            cursor: not-allowed !important;\n          }\n        }\n      "]);return u=function(){return e},e}function l(){var e=(0,o.default)(["\n        > div {\n          background-color: #e6f0fb !important;\n          border-color: #aed4fb !important;\n        }\n      "]);return l=function(){return e},e}function d(){var e=(0,o.default)(["\n  margin-left: 29px;\n  > div {\n    height: 30px;\n    width: 100%;\n    justify-content: space-between;\n    background: #ffffff;\n    color: #333740;\n    border-radius: 2px;\n    border: solid 1px #007eff;\n\n    > button {\n      cursor: pointer;\n      padding-left: 10px !important;\n      line-height: 30px;\n      width: 100%;\n      color: #333740;\n      text-align: left;\n      background-color: #ffffff;\n      border: none;\n      font-size: 13px;\n      font-weight: 500;\n      &:focus,\n      &:active,\n      &:hover,\n      &:visited {\n        background-color: transparent !important;\n        box-shadow: none;\n        color: #333740;\n      }\n      > p {\n        position: relative;\n        height: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        text-align: center;\n        margin-bottom: 0;\n        margin-top: -1px;\n        color: #007eff !important;\n        font-size: 13px !important;\n        svg {\n          fill: #007eff;\n          margin-right: 7px;\n          vertical-align: initial;\n        }\n      }\n    }\n    > div {\n      max-height: 180px;\n      min-width: calc(100% + 2px);\n      margin-left: -1px;\n      margin-top: -1px;\n      padding: 0;\n      border-top-left-radius: 0 !important;\n      border-top-right-radius: 0;\n      border-color: #e3e9f3 !important;\n      border-top-color: #aed4fb !important;\n      box-shadow: 0 2px 3px rgba(227, 233, 245, 0.5);\n\n      overflow: scroll;\n\n      button {\n        height: 30px;\n        padding-left: 10px !important;\n        line-height: 26px;\n        cursor: pointer;\n        font-size: 13px !important;\n        &:focus,\n        &:active,\n        &:hover,\n        &:hover {\n          background-color: #fafafb !important;\n          color: #333740;\n          outline: 0;\n        }\n        div {\n          margin: 0;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n      }\n    }\n  }\n\n  ","\n\n  ","\n"]);return d=function(){return e},e}var c=i.default.div(d(),(function(e){if(e.isOpen)return(0,i.css)(l())}),(function(e){if(e.notAllowed)return(0,i.css)(u())}));t.Wrapper=c},2665:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(4));function o(){var e=(0,r.default)(["\n  display: flex;\n  margin-bottom: 6px;\n"]);return o=function(){return e},e}var i=a(n(3)).default.div(o());t.default=i},2666:function(e,t,n){"use strict";var a=n(6),r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(18)),i=a(n(1)),u=n(123),l=n(287),d=r(n(2)),c=n(9),f=r(n(804)),s=r(n(2596)),p=r(n(803)),m=function(e){var t=e.componentUid,n=e.dynamicZoneComponents,a=e.itemIndex,r=e.moveItem,d=e.moveRow,m=e.name,g=e.removeField,v=e.rowIndex,y=e.size,b=e.type,E=(0,f.default)(),h=E.goTo,x=E.componentLayouts,I=E.metadatas,w=E.setEditFieldToSelect,_=E.selectedItemName,R=E.setIsDraggingSibling,D=(0,i.useRef)(null),C=(0,i.useRef)(null),S=(0,u.useDrop)({accept:p.default.EDIT_FIELD,hover:function(e,t){if(C.current&&12===e.size){var n=t.getItem().itemIndex,r=a,o=t.getItem().rowIndex,i=v;if(n!==r||o!==i){var u=C.current.getBoundingClientRect(),l=(u.bottom-u.top)/2,c=t.getClientOffset().y-u.top;o<i&&c<l||o>i&&c>l||(d(o,i),e.rowIndex=i,e.itemIndex=r)}}},drop:function(e,t){if(C.current){var n=t.getItem().itemIndex,o=a,i=t.getItem().rowIndex,u=v;if(12!==e.size&&(n!==o||i!==u)){var l=C.current.getBoundingClientRect();if(Math.abs(t.getClientOffset().x-l.left)>l.width/1.8)return r(n,o+1,i,u),e.itemIndex=o+1,void(e.rowIndex=u);r(n,o,i,u),e.itemIndex=o,e.rowIndex=u}}},collect:function(e){return{canDrop:e.canDrop(),clientOffset:e.getClientOffset(),isOver:e.isOver(),isOverCurrent:e.isOver({shallow:!0}),itemType:e.getItemType()}}}),O=(0,o.default)(S,2),T=O[0],M=T.clientOffset,k=T.isOver,P=O[1],L=(0,u.useDrag)({begin:function(){R(!0)},canDrag:function(){return"_TEMP_"!==m},collect:function(e){return{isDragging:e.isDragging(),getItem:e.getItem()}},end:function(){R(!1)},item:{type:p.default.EDIT_FIELD,itemIndex:a,rowIndex:v,name:m,size:y}}),F=(0,o.default)(L,3),j=F[0],N=j.isDragging,z=j.getItem,A=F[1],U=F[2];(0,i.useEffect)((function(){U((0,l.getEmptyImage)(),{captureDraggingState:!0})}),[U]);var q={dragRef:A(D),dropRef:P(C)},W=!1,B=!1;if(C.current&&M){var H=C.current.getBoundingClientRect();W=k&&12!==z.size&&Math.abs(M.x-H.left)<H.width/2,B=k&&12!==z.size&&Math.abs(M.x-H.left)>H.width/2,"_TEMP_"===m&&(W=k&&12!==z.size,B=!1)}return i.default.createElement(s.default,{goTo:h,componentUid:t,componentLayouts:x,dynamicZoneComponents:n,isDragging:N,label:(0,c.get)(I,[m,"edit","label"],""),name:m,onClickEdit:w,onClickRemove:function(e){e.stopPropagation(),g(v,a)},selectedItem:_,showLeftCarret:W,showRightCarret:B,size:y,type:b,ref:q})};m.defaultProps={componentUid:"",dynamicZoneComponents:[],type:"string"},m.propTypes={componentUid:d.default.string,dynamicZoneComponents:d.default.array,itemIndex:d.default.number.isRequired,moveItem:d.default.func.isRequired,moveRow:d.default.func.isRequired,name:d.default.string.isRequired,removeField:d.default.func.isRequired,rowIndex:d.default.number.isRequired,size:d.default.number.isRequired,type:d.default.string};var g=m;t.default=g},2667:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(4));function o(){var e=(0,r.default)(["\n  position: absolute;\n  ","\n  height: 100%;\n  width: 2px;\n  margin-right: 3px;\n  border-radius: 2px;\n  background: #007eff;\n"]);return o=function(){return e},e}var i=a(n(3)).default.div(o(),(function(e){return e.right?"\n      right: -4px;\n    ":"\n    left: -1px;\n  "}));t.default=i},2668:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(4));function o(){var e=(0,r.default)(["\n  display: flex;\n  margin: 5px 0 0px 0;\n  overflow: auto;\n  height: 119px;\n"]);return o=function(){return e},e}var i=a(n(3)).default.div(o());t.default=i},2669:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(4)),o=a(n(3)),i=a(n(2));function u(){var e=(0,r.default)(["\n  display: flex;\n  position: relative;\n  min-height: ",";\n\n  .sub {\n    width: 100%;\n    padding: 0 5px;\n  }\n"]);return u=function(){return e},e}var l=o.default.div(u(),(function(e){return e.withLongerHeight?"102px":"30px"}));l.defaultProps={withLongerHeight:!1},l.propTypes={withLongerHeight:i.default.bool};var d=l;t.default=d},2670:function(e,t,n){"use strict";var a=n(6),r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(33)),i=r(n(35)),u=r(n(18)),l=a(n(1)),d=n(27),c=r(n(2)),f=n(8),s=r(n(112)),p=r(n(288)),m=r(n(2568)),g=r(n(2671)),v=function(e){var t=e.componentUid,n=e.friendlyName,a=e.icon,r=e.setIsOverDynamicZone,c=(0,l.useState)(!1),v=(0,u.default)(c,2),y=v[0],b=v[1],E=(0,l.useState)({isLoading:!0,canAccess:!1}),h=(0,u.default)(E,2),x=h[0],I=x.isLoading,w=x.canAccess,_=h[1],R=(0,d.useHistory)().push,D=(0,f.useUser)();(0,l.useEffect)((function(){(function(){var e=(0,i.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.hasPermissions)(D,p.default.componentsConfigurations);case 3:t=e.sent,_({isLoading:!1,canAccess:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),_({isLoading:!1});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);return l.default.createElement(m.default,{componentUid:t,friendlyName:n,icon:a,isOver:y,onClick:function(){!I&&w&&R("/plugins/".concat(s.default,"/ctm-configurations/edit-settings/components/").concat(t,"/"))},onMouseEvent:function(){r((function(e){return!e})),b((function(e){return!e}))},tradId:"components.DraggableAttr.edit"},l.default.createElement(g.default,{isOver:y},t))};v.defaultProps={friendlyName:"",icon:"smile"},v.propTypes={componentUid:c.default.string.isRequired,friendlyName:c.default.string,icon:c.default.string,setIsOverDynamicZone:c.default.func.isRequired};var y=v;t.default=y},2671:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(4));function o(){var e=(0,r.default)(["\n  position: absolute;\n  bottom: -10px;\n  left: 105px;\n  visibility: ",";\n  line-height: 20px;\n  height: 20px;\n  padding: 0 10px;\n  background-color: #000000;\n  font-size: 12px;\n  color: #fff;\n  opacity: 0.5;\n  border: 1px solid #e3e9f3;\n  z-index: 99;\n"]);return o=function(){return e},e}var i=a(n(3)).default.div(o(),(function(e){return e.isOver?"visible":"hidden"}));t.default=i},2672:function(e,t,n){"use strict";var a=n(0),r=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(1)),i=a(n(2)),u=n(15),l=function(e){var t=e.description,n=e.title;return o.default.createElement(o.default.Fragment,null,!!n&&o.default.createElement(u.FormattedMessage,{id:n}),!!t&&o.default.createElement(u.FormattedMessage,{id:t},(function(e){return o.default.createElement("p",null,e)})))};l.propTypes={description:i.default.string,title:i.default.string},l.defaultProps={description:null,title:null};var d=(0,o.memo)(l);t.default=d},2673:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(4));function o(){var e=(0,r.default)(["\n  color: #333740;\n  font-size: 13px;\n  font-weight: 500;\n  line-height: 18px;\n\n  p {\n    margin-top: 2px;\n    margin-bottom: 13px;\n    color: #9ea7b8;\n    font-size: 12px;\n    font-weight: 400;\n    line-height: normal;\n  }\n"]);return o=function(){return e},e}var i=a(n(3)).default.div(o());t.default=i},2674:function(e,t,n){"use strict";var a=n(0),r=n(6);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(1)),i=a(n(2)),u=a(n(804)),l=a(n(2595)),d=a(n(2554)),c=a(n(2675)),f=function(e){var t=e.addItem,n=e.buttonData,a=e.moveItem,r=e.removeItem,i=(0,u.default)().relationsLayout;return o.default.createElement("div",{className:"col-4"},o.default.createElement(d.default,{style:{marginTop:7,paddingTop:11,paddingLeft:5,paddingRight:5,border:"1px dashed #e3e9f3"}},i.map((function(e,t){return o.default.createElement(c.default,{index:t,key:e,move:a,name:e,removeItem:r})})),o.default.createElement(l.default,{data:n,isRelation:!0,onClick:t,style:{marginLeft:10,marginRight:10,marginBottom:13}})))};f.defaultProps={buttonData:[]},f.propTypes={addItem:i.default.func.isRequired,buttonData:i.default.array,moveItem:i.default.func.isRequired,removeItem:i.default.func.isRequired};var s=(0,o.memo)(f);t.default=s},2675:function(e,t,n){"use strict";var a=n(6),r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(18)),i=a(n(1)),u=n(123),l=n(287),d=r(n(2)),c=n(9),f=r(n(804)),s=r(n(2596)),p=r(n(803)),m=function(e){var t=e.index,n=e.move,a=e.name,r=e.removeItem,d=(0,f.default)(),m=d.goTo,g=d.metadatas,v=d.selectedItemName,y=d.setEditFieldToSelect,b=d.setIsDraggingSibling,E=(0,i.useRef)(null),h=(0,i.useRef)(null),x=(0,u.useDrop)({accept:p.default.EDIT_RELATION,hover:function(e,a){if(h.current){var r=e.index,o=t;if(r!==o){var i=h.current.getBoundingClientRect(),u=(i.bottom-i.top)/2,l=a.getClientOffset().y-i.top;r<o&&l<u||r>o&&l>u||(n(r,o),e.index=o)}}}}),I=(0,o.default)(x,2)[1],w=(0,u.useDrag)({item:{type:p.default.EDIT_RELATION,id:a,name:a,index:t},begin:function(){b(!0)},end:function(){b(!1)},collect:function(e){return{isDragging:e.isDragging()}}}),_=(0,o.default)(w,3),R=_[0].isDragging,D=_[1],C=_[2];(0,i.useEffect)((function(){C((0,l.getEmptyImage)(),{captureDraggingState:!1})}),[C]);var S={dragRef:D(E),dropRef:I(h)};return i.default.createElement(s.default,{isDragging:R,label:(0,c.get)(g,[a,"edit","label"],""),name:a,onClickEdit:function(){return y(a)},onClickRemove:function(e){e.stopPropagation(),r(t)},push:m,ref:S,selectedItem:v,size:12,style:{marginBottom:6,paddingLeft:5,paddingRight:5},type:"relation",i:0===t})};m.defaultProps={move:function(){}},m.propTypes={index:d.default.number.isRequired,move:d.default.func,name:d.default.string.isRequired,removeItem:d.default.func.isRequired};var g=m;t.default=g},2676:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(112)),o=function(e){var t;switch(e){case"description":case"label":case"placeholder":t="text";break;case"mainField":t="select";break;case"editable":t="bool";break;default:t=""}return{type:t,label:{id:"mainField"===e?"".concat(r.default,".containers.SettingPage.editSettings.entry.title"):"".concat(r.default,".form.Input.").concat(e)}}};t.default=o},2677:function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=t.default=void 0;var r=a(n(28)),o=n(45),i=n(9),u=n(2597),l=(0,o.fromJS)({fieldForm:{},componentLayouts:{},metaToEdit:"",initialData:{},isLoading:!0,metaForm:{},modifiedData:{}});t.initialState=l;var d=function(e,t){var n=["modifiedData","layouts","edit"],a=["modifiedData","layouts","editRelations"];switch(t.type){case"ADD_RELATION":return e.updateIn(a,(function(e){return e.push(t.name)}));case"GET_DATA_SUCCEEDED":var l=(0,i.cloneDeep)(t.data);return(0,i.set)(l,["layouts","edit"],(0,u.formatLayout)((0,u.createLayout)(l.layouts.edit))),e.update("componentLayouts",(function(){return(0,o.fromJS)(t.componentLayouts)})).update("initialData",(function(){return(0,o.fromJS)(l||{})})).update("isLoading",(function(){return!1})).update("modifiedData",(function(){return(0,o.fromJS)(l||{})}));case"MOVE_RELATION":return e.updateIn(a,(function(n){return n.delete(t.dragIndex).insert(t.hoverIndex,e.getIn([].concat(a,[t.dragIndex])))}));case"MOVE_ROW":return e.updateIn(n,(function(a){return a.delete(t.dragRowIndex).insert(t.hoverRowIndex,e.getIn([].concat(n,[t.dragRowIndex])))}));case"ON_ADD_DATA":var d=(0,u.getInputSize)(e.getIn(["modifiedData","schema","attributes",t.name,"type"])),c=e.getIn(n).size,f=e.getIn(n).updateIn([c-1,"rowContent"],(function(e){return e?e.push({name:t.name,size:d}):(0,o.fromJS)([{name:t.name,size:d}])})),s=(0,u.formatLayout)(f.toJS());return e.updateIn(n,(function(){return(0,o.fromJS)(s)}));case"ON_CHANGE":return e.updateIn(["modifiedData"].concat((0,r.default)(t.keys)),(function(){return t.value}));case"ON_CHANGE_META":return e.updateIn(["metaForm"].concat((0,r.default)(t.keys)),(function(){return t.value}));case"ON_RESET":return e.update("modifiedData",(function(){return e.get("initialData")}));case"REMOVE_FIELD":var p,m=e.getIn([].concat(n,[t.rowIndex,"rowContent"]));p=1===m.size||2===m.size&&"_TEMP_"===m.getIn([1,"name"])?e.updateIn(n,(function(e){return e.delete(t.rowIndex)})):e.updateIn([].concat(n,[t.rowIndex,"rowContent"]),(function(e){return e.delete(t.fieldIndex)}));var g=(0,o.fromJS)((0,u.formatLayout)(p.getIn(n).toJS()));return e.updateIn(n,(function(){return g}));case"REMOVE_RELATION":return e.updateIn(a,(function(e){return e.delete(t.index)}));case"REORDER_DIFF_ROW":var v=e.updateIn([].concat(n,[t.dragRowIndex,"rowContent"]),(function(e){return e.remove(t.dragIndex)})).updateIn([].concat(n,[t.hoverRowIndex,"rowContent"]),(function(a){return a.insert(t.hoverIndex,e.getIn([].concat(n,[t.dragRowIndex,"rowContent",t.dragIndex])))})),y=(0,u.formatLayout)(v.getIn(n).toJS());return e.updateIn(n,(function(){return(0,o.fromJS)(y)}));case"REORDER_ROW":var b=e.updateIn([].concat(n,[t.dragRowIndex,"rowContent"]),(function(e){return e.delete(t.dragIndex).insert(t.hoverIndex,e.get(t.dragIndex))})),E=(0,u.formatLayout)(b.getIn(n).toJS());return e.updateIn(n,(function(){return(0,o.fromJS)(E)}));case"SET_FIELD_TO_EDIT":return e.update("metaToEdit",(function(){return t.name})).updateIn(["metaForm"],(function(){return e.getIn(["modifiedData","metadatas",t.name,"edit"])}));case"SUBMIT_META_FORM":var h=["modifiedData","metadatas",e.get("metaToEdit"),"edit"];return e.updateIn(h,(function(){return e.getIn(["metaForm"])}));case"SUBMIT_SUCCEEDED":return e.update("initialData",(function(){return e.get("modifiedData")}));case"UNSET_FIELD_TO_EDIT":return e.update("metaToEdit",(function(){return""})).update("metaForm",(function(){return(0,o.fromJS)({})}));default:return e}};t.default=d}}]);